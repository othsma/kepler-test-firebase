import{j as e}from"./vendor-pdf-renderer-DJMoKmcy.js";import{r as n}from"./vendor-react-DSd34EeT.js";import{u as Ie,e as Me,c as Oe,b as $e,U as Fe,j as Te}from"./index-DHr6qV3y.js";import{b as Ae,d as qe,p as ne,r as Ee,T as ie,m as Le,J as _e,l as Re,F as Ue}from"./vendor-ui-CT0vmjIh.js";import{f as o}from"./vendor-utils-BOCFPwNx.js";import"./vendor-firebase-CWMDWzYz.js";import"./vendor-pdf-utils-CBrSDip1.js";function Ke(){const a=Ie(t=>t.isDarkMode),{orders:de,updateOrderStatus:le,createOrder:ce,deleteOrder:oe}=Me(),{products:k}=Oe(),{clients:m}=$e(),[S,xe]=n.useState("all"),[y,me]=n.useState(""),[ue,_]=n.useState(!1),[R,pe]=n.useState(null),[he,ge]=n.useState("thermal"),[C,ye]=n.useState(!0),[P,U]=n.useState(!1),[D,Q]=n.useState(null),[u,j]=n.useState(""),[p,f]=n.useState(""),[l,x]=n.useState([]),[z,b]=n.useState(""),[c,w]=n.useState(""),[V,I]=n.useState(1),[B,N]=n.useState(""),[M,v]=n.useState(0),[G,H]=n.useState("cash"),[J,O]=n.useState("not_paid"),[h,$]=n.useState(0),[K,F]=n.useState(o(new Date,"yyyy-MM-dd")),[W,T]=n.useState(o(new Date(Date.now()+7*24*60*60*1e3),"yyyy-MM-dd")),[A,q]=n.useState("pending"),[X,E]=n.useState(""),Y=de.filter(t=>{const s=S==="all"||t.status===S,r=m.find(i=>i.id===t.clientId),d=y?(r==null?void 0:r.name.toLowerCase().includes(y.toLowerCase()))||t.id.toLowerCase().includes(y.toLowerCase()):!0;return s&&d}),Z=m.filter(t=>t.name.toLowerCase().includes(p.toLowerCase())||t.email.toLowerCase().includes(p.toLowerCase())||t.phone.toLowerCase().includes(p.toLowerCase())),ee=k.filter(t=>{var s;return t.name.toLowerCase().includes(c.toLowerCase())||((s=t.sku)==null?void 0:s.toLowerCase().includes(c.toLowerCase()))}),je=t=>{switch(t){case"pending":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:"En attente"});case"processing":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"En cours"});case"ready_for_pickup":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"Prêt à récupérer"});case"completed":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Terminé"});case"cancelled":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Annulé"});default:return null}},fe=(t,s,r)=>t==="paid"||s>=r?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Payé"}):t==="partially_paid"||s>0&&s<r?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Partiellement payé"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Non payé"}),be=t=>{const s=t.items.map(d=>{const i=k.find(L=>L.id===d.productId);return{id:d.productId,name:(i==null?void 0:i.name)||d.name||"Unknown Product",sku:(i==null?void 0:i.sku)||"N/A",quantity:d.quantity,price:d.price||(i==null?void 0:i.price)||0}}),r=m.find(d=>d.id===t.clientId);return{invoiceNumber:`ORD-${t.id.substring(0,8)}`,date:t.createdAt,customer:r?{name:r.name,email:r.email,address:r.address,phone:r.phone}:void 0,items:s,subtotal:t.total/1.2,tax:t.total-t.total/1.2,total:t.total,paymentMethod:t.paymentMethod||"Card",paymentStatus:t.paymentStatus||(t.status==="completed"?"Paid":"Pending"),note:t.note,amountPaid:t.amountPaid||0}},te=(t,s)=>{const r=be(t);pe(r),ge(s),_(!0)},we=t=>{U(!0),Q(t.id);const s=m.find(r=>r.id===t.clientId);if(j(t.clientId||""),f((s==null?void 0:s.name)||""),t.items&&Array.isArray(t.items)){const r=t.items.map(d=>{const i=k.find(L=>L.id===d.productId);return{productId:d.productId,quantity:d.quantity,name:(i==null?void 0:i.name)||d.name||"Unknown Product",description:d.description||(i==null?void 0:i.description)||"",price:d.price||(i==null?void 0:i.price)||0}});x(r)}else x([]);F(t.orderDate||o(new Date(t.createdAt),"yyyy-MM-dd")),T(t.deliveryDate||o(new Date(Date.now()+7*24*60*60*1e3),"yyyy-MM-dd")),H(t.paymentMethod||"cash"),O(t.paymentStatus||"not_paid"),$(t.amountPaid||0),q(t.status||"pending"),E(t.note||""),b(""),w(""),N(""),I(1),v(0)},Ne=t=>{window.confirm(`Êtes-vous sûr de vouloir supprimer la commande #${t.id}?`)&&oe(t.id)},ve=t=>{b(t.id),w(t.name),v(t.price),N(t.description||"")},ke=()=>{if(!c)return;const t={productId:z||"custom",name:c,description:B,quantity:V,price:M};x([...l,t]),b(""),w(""),N(""),I(1),v(0)},Se=t=>{const s=[...l];s.splice(t,1),x(s)},se=(t,s)=>{if(s<1)return;const r=[...l];r[t].quantity=s,x(r)},g=()=>l.reduce((t,s)=>t+s.price*s.quantity,0),ae=()=>g()*(.2/1.2),Ce=()=>g()-ae(),Pe=()=>g()-h,De=async()=>{if(!u||l.length===0)return;const t=g(),s={clientId:u,items:l,total:t,status:A,paymentMethod:G,paymentStatus:J,amountPaid:h,orderDate:K,deliveryDate:W,note:X};P&&D?(await le(D,A),console.log("Updating order:",D,s)):(await ce(u,t),console.log("Creating order:",s)),re()},re=()=>{j(""),f(""),x([]),F(o(new Date,"yyyy-MM-dd")),T(o(new Date(Date.now()+7*24*60*60*1e3),"yyyy-MM-dd")),O("not_paid"),$(0),q("pending"),E(""),U(!1),Q(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:`text-2xl font-semibold ${a?"text-white":"text-gray-900"}`,children:"Gestion des commandes"})}),e.jsxs("div",{className:`rounded-lg ${a?"bg-gray-800":"bg-white"} shadow`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:P?"Modifier la commande":"Nouvelle commande"}),e.jsx("button",{onClick:()=>ye(!C),className:"text-gray-500 hover:text-gray-700",children:C?e.jsx(Ae,{className:"h-5 w-5"}):e.jsx(qe,{className:"h-5 w-5"})})]}),C&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:`text-md font-medium mb-4 ${a?"text-white":"text-gray-900"}`,children:"Détails de la commande"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Client *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:p,onChange:t=>{f(t.target.value),j("")},placeholder:"Rechercher un client...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),p&&!u&&Z.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto",children:Z.map(t=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{j(t.id),f(t.name)},children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.phone})]},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Date de commande *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"date",value:K,onChange:t=>F(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Date de livraison *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"date",value:W,onChange:t=>T(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Statut de la commande *"}),e.jsxs("select",{value:A,onChange:t=>q(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"processing",children:"En cours"}),e.jsx("option",{value:"ready_for_pickup",children:"Prêt à récupérer"}),e.jsx("option",{value:"completed",children:"Terminé"}),e.jsx("option",{value:"cancelled",children:"Annulé"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Statut du paiement *"}),e.jsxs("select",{value:J,onChange:t=>O(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"not_paid",children:"Non payé"}),e.jsx("option",{value:"partially_paid",children:"Partiellement payé"}),e.jsx("option",{value:"paid",children:"Payé"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Mode de paiement *"}),e.jsxs("select",{value:G,onChange:t=>H(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"cash",children:"Espèces"}),e.jsx("option",{value:"card",children:"Carte bancaire"}),e.jsx("option",{value:"transfer",children:"Virement"}),e.jsx("option",{value:"digital",children:"Chèque"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Montant payé"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"€"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:h,onChange:t=>$(parseFloat(t.target.value)||0),className:"pl-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Note (optionnel)"}),e.jsx("textarea",{value:X,onChange:t=>E(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:2})]})]}),e.jsx("h3",{className:`text-md font-medium mb-4 ${a?"text-white":"text-gray-900"}`,children:"Articles de la commande"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Produit *"}),e.jsx("input",{type:"text",value:c,onChange:t=>{w(t.target.value),b("")},placeholder:"Rechercher un produit...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),c&&!z&&ee.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto",children:ee.map(t=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>ve(t),children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["€",t.price," - Stock: ",t.stock]})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Description"}),e.jsx("input",{type:"text",value:B,onChange:t=>N(t.target.value),placeholder:"Description du produit...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Quantité *"}),e.jsx("input",{type:"number",min:"1",value:V,onChange:t=>I(parseInt(t.target.value)||1),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-300":"text-gray-700"} mb-1`,children:"Prix *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"€"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:M,onChange:t=>v(parseFloat(t.target.value)||0),className:"pl-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:ke,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 flex items-center gap-1",disabled:!c||M<=0,children:[e.jsx(ne,{className:"h-4 w-4"}),"Ajouter un article"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:a?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Article"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantité"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prix unitaire"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total ligne"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.length>0?l.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-300",children:t.description}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("button",{onClick:()=>se(s,t.quantity-1),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("span",{className:"mx-2",children:t.quantity}),e.jsx("button",{onClick:()=>se(s,t.quantity+1),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(ne,{className:"h-4 w-4"})})]})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900 dark:text-white",children:["€",t.price.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900 dark:text-white",children:["€",(t.price*t.quantity).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>Se(s),className:"text-red-600 hover:text-red-900",children:e.jsx(ie,{className:"h-4 w-4"})})})]},s)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-3 text-center text-sm text-gray-500 dark:text-gray-400",children:"Aucun article ajouté à cette commande pour le moment. Utilisez le formulaire ci-dessus pour ajouter des articles."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"w-64",children:[e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"Total HT:"}),e.jsxs("span",{className:a?"text-white":"text-gray-900",children:["€",Ce().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"TVA (20%):"}),e.jsxs("span",{className:a?"text-white":"text-gray-900",children:["€",ae().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between py-2 font-bold",children:[e.jsx("span",{className:a?"text-white":"text-gray-900",children:"Total TTC:"}),e.jsxs("span",{className:a?"text-white":"text-gray-900",children:["€",g().toFixed(2)]})]}),h>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:"Montant payé:"}),e.jsxs("span",{className:a?"text-white":"text-gray-900",children:["€",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between py-2 font-bold",children:[e.jsx("span",{className:a?"text-white":"text-gray-900",children:"Restant:"}),e.jsxs("span",{className:a?"text-white":"text-gray-900",children:["€",Pe().toFixed(2)]})]})]})]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{onClick:re,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{onClick:De,disabled:!u||l.length===0,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:P?"Mettre à jour la commande":"Enregistrer la commande"})]})]})]}),e.jsxs("div",{className:`rounded-lg ${a?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:"Toutes les commandes"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher des commandes...",value:y,onChange:t=>me(t.target.value),className:"pl-10 pr-4 py-2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("select",{value:S,onChange:t=>xe(t.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"processing",children:"En cours"}),e.jsx("option",{value:"ready_for_pickup",children:"Prêt à récupérer"}),e.jsx("option",{value:"completed",children:"Terminé"}),e.jsx("option",{value:"cancelled",children:"Annulé"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:a?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"N° commande"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Paiement"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y divide-gray-200 dark:divide-gray-700 ${a?"bg-gray-800":"bg-white"}`,children:Y.length>0?Y.map(t=>{const s=m.find(r=>r.id===t.clientId);return e.jsxs("tr",{className:`hover:${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",t.id.substring(0,8)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(s==null?void 0:s.name)||"Client inconnu"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:o(new Date(t.createdAt),"MM/dd/yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:je(t.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[fe(t.paymentStatus||"not_paid",t.amountPaid||0,t.total),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.paymentMethod||"Espèces"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 dark:text-white",children:["€",t.total.toFixed(2),(t.amountPaid||0)>0&&(t.amountPaid||0)<t.total&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Payé: €",(t.amountPaid||0).toFixed(2)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>we(t),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>te(t,"thermal"),className:"text-green-600 hover:text-green-900",title:"Print Receipt",children:e.jsx(Re,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>te(t,"a4"),className:"text-indigo-600 hover:text-indigo-900",title:"A4 Invoice",children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>Ne(t),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(ie,{className:"h-5 w-5"})})]})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Aucune commande trouvée"})})})]})})]}),ue&&R&&e.jsx(Fe,{data:Te(R),onClose:()=>_(!1),initialFormat:he})]})}export{Ke as default};
