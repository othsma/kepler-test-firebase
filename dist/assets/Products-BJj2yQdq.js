import{j as t}from"./vendor-pdf-renderer-DJMoKmcy.js";import{r as d,R as we}from"./vendor-react-DSd34EeT.js";import{u as ke,c as C,i as Ce}from"./index-DHr6qV3y.js";import{p as $e,k as Se}from"./vendor-firebase-CWMDWzYz.js";import{p as Y,K as $,m as Z,d as S,C as _,E as Q,T as ee,X as G}from"./vendor-ui-CT0vmjIh.js";import"./vendor-utils-BOCFPwNx.js";import"./vendor-pdf-utils-CBrSDip1.js";function Re(){const r=ke(s=>s.isDarkMode),{products:g,categories:u,searchQuery:y,selectedCategory:A,setSearchQuery:O,setSelectedCategory:X,addProduct:te,updateProduct:P,deleteProduct:se}=C(),[f,h]=d.useState("main"),[E,D]=d.useState(null),[re,ae]=d.useState(new Set),[l,c]=d.useState({name:"",category:"",price:0,stock:0,sku:"",description:"",imageUrl:"",createdAt:""}),[m,ie]=d.useState("name"),[w,B]=d.useState("asc"),[b,R]=d.useState({min:"",max:""}),[p,M]=d.useState({min:"",max:""}),[j,L]=d.useState({start:"",end:""}),[U,H]=d.useState(!1),[oe,q]=d.useState(!1),[T,K]=d.useState(""),[ne,le]=d.useState(new Set),[x,J]=d.useState(null),[k,z]=d.useState(""),W=g.filter(s=>{const i=!y||s.name.toLowerCase().includes(y.toLowerCase())||s.description.toLowerCase().includes(y.toLowerCase())||s.sku.toLowerCase().includes(y.toLowerCase()),a=A==="all"||s.category===A,n=(!b.min||s.price>=Number(b.min))&&(!b.max||s.price<=Number(b.max)),F=(!p.min||s.stock>=Number(p.min))&&(!p.max||s.stock<=Number(p.max)),N=s.createdAt?new Date(s.createdAt).getTime():0,o=(!j.start||N>=new Date(j.start).getTime())&&(!j.end||N<=new Date(j.end).getTime());return i&&a&&n&&F&&o}),de=()=>{O(""),X("all"),R({min:"",max:""}),M({min:"",max:""}),L({start:"",end:""}),H(!1)},ce=y||A!=="all"||b.min||b.max||p.min||p.max||j.start||j.end,ge=[...W].sort((s,i)=>{let a=s[m],n=i[m];return m==="price"?(a=Number(a),n=Number(n)):m==="createdAt"?(a=new Date(a).getTime(),n=new Date(n).getTime()):(a=String(a).toLowerCase(),n=String(n).toLowerCase()),w==="asc"?a<n?-1:a>n?1:0:a>n?-1:a<n?1:0}),V=s=>{m===s?B(w==="asc"?"desc":"asc"):(ie(s),B("asc"))},me=s=>{s.preventDefault(),E?(P(E,l),D(null),h("all")):(te(l),h("all")),c({name:"",category:"",price:0,stock:0,sku:"",description:"",imageUrl:"",createdAt:""})},xe=s=>{ae(i=>{const a=new Set(i);return a.has(s)?a.delete(s):a.add(s),a})},he=s=>{le(i=>{const a=new Set(i);return a.has(s)?a.delete(s):a.add(s),a})},ue=async()=>{if(T.trim()){const s=f==="main";try{const i=T.trim();await $e(Se(Ce,"categories"),{name:i}),c(a=>({...a,category:i})),C.setState(a=>({categories:[...a.categories,i].sort()})),K(""),q(!1),s&&setTimeout(()=>h("main"),0)}catch(i){console.error("Error adding category:",i)}}},ye=()=>{K(""),q(!1)},be=()=>{const s=u.filter(i=>i&&i.trim());s.length!==u.length&&C.setState(i=>({categories:s}))};we.useEffect(()=>{be()},[u]);const pe=s=>{J(s),z(s)},I=()=>{J(null),z("")},je=async()=>{if(!x||!k.trim())return;const s=k.trim();if(s===x){I();return}try{const i=g.filter(a=>a.category===x);for(const a of i)await P(a.id,{category:s});C.setState(a=>({categories:a.categories.map(n=>n===x?s:n).sort()})),I()}catch(i){console.error("Error updating category:",i)}},fe=async(s,i)=>{try{await P(s,{category:i})}catch(a){console.error("Error adding product to category:",a)}},Ne=async s=>{try{await P(s,{category:""})}catch(i){console.error("Error removing product from category:",i)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:`text-2xl font-semibold ${r?"text-white":"text-gray-900"}`,children:"Produits"}),t.jsxs("button",{onClick:()=>{h("main"),c({name:"",category:"",price:0,stock:0,sku:"",description:"",imageUrl:"",createdAt:""}),D(null)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4"}),"Ajouter un produit"]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsxs("button",{onClick:()=>h("main"),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${f==="main"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx($,{className:"h-4 w-4"}),"Créer un produit"]}),t.jsxs("button",{onClick:()=>h("all"),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${f==="all"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Z,{className:"h-4 w-4"}),"Tous les produits (",g.length,")"]}),t.jsxs("button",{onClick:()=>h("categories"),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${f==="categories"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(S,{className:"h-4 w-4"}),"Catégories (",u.length,")"]})]})}),f==="main"&&t.jsxs("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-6`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[t.jsx($,{className:"h-5 w-5 text-indigo-600"}),t.jsx("h2",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:E?"Modifier le produit":"Créer un nouveau produit"})]}),t.jsxs("form",{onSubmit:me,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Nom"}),t.jsx("input",{type:"text",value:l.name,onChange:s=>c({...l,name:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Catégorie (optionnel)"}),t.jsxs("select",{value:l.category,onChange:s=>c({...l,category:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"",children:"Sans catégorie"}),u.map(s=>t.jsx("option",{value:s,children:s},s))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Prix"}),t.jsx("input",{type:"number",value:l.price,onChange:s=>c({...l,price:Number(s.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Stock"}),t.jsx("input",{type:"number",value:l.stock,onChange:s=>c({...l,stock:Number(s.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"SKU"}),t.jsx("input",{type:"text",value:l.sku,onChange:s=>c({...l,sku:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"Description"}),t.jsx("textarea",{value:l.description,onChange:s=>c({...l,description:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium ${r?"text-gray-300":"text-gray-700"}`,children:"URL de l'image"}),t.jsx("input",{type:"url",value:l.imageUrl,onChange:s=>c({...l,imageUrl:s.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{type:"button",onClick:()=>{h("all"),D(null),c({name:"",category:"",price:0,stock:0,sku:"",description:"",imageUrl:"",createdAt:""})},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),t.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:E?"Mettre à jour":"Ajouter"})]})]})]}),f==="all"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-4`,children:t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-white dark:bg-gray-700 p-4 rounded-lg shadow-inner",children:[t.jsx(Z,{className:"h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Rechercher des produits (nom, description, SKU)...",value:y,onChange:s=>O(s.target.value),className:"flex-1 bg-transparent border-0 focus:ring-0 text-gray-900 dark:text-white placeholder-gray-400"})]}),t.jsxs("select",{value:A,onChange:s=>X(s.target.value),className:"rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:"Toutes les catégories"}),u.map(s=>t.jsx("option",{value:s,children:s},s))]}),t.jsxs("button",{onClick:()=>H(!U),className:`px-4 py-2 rounded-lg border ${U?"bg-indigo-100 text-indigo-700 border-indigo-300":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Filtres avancés ",U?"▲":"▼"]}),ce&&t.jsx("button",{onClick:de,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Effacer les filtres"})]}),U&&t.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-lg ${r?"bg-gray-700":"bg-gray-50"}`,children:[t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Prix (€)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",placeholder:"Min",value:b.min,onChange:s=>R(i=>({...i,min:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`}),t.jsx("input",{type:"number",placeholder:"Max",value:b.max,onChange:s=>R(i=>({...i,max:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Stock"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",placeholder:"Min",value:p.min,onChange:s=>M(i=>({...i,min:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`}),t.jsx("input",{type:"number",placeholder:"Max",value:p.max,onChange:s=>M(i=>({...i,max:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Date de création"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"date",value:j.start,onChange:s=>L(i=>({...i,start:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`}),t.jsx("input",{type:"date",value:j.end,onChange:s=>L(i=>({...i,end:s.target.value})),className:`w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm ${r?"bg-gray-600 border-gray-500 text-white":"bg-white"}`})]})]})]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsxs("button",{onClick:()=>V("name"),className:`px-3 py-2 text-sm rounded-md border ${m==="name"?"bg-indigo-100 text-indigo-700 border-indigo-300":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Nom ",m==="name"&&(w==="asc"?"↑":"↓")]}),t.jsxs("button",{onClick:()=>V("price"),className:`px-3 py-2 text-sm rounded-md border ${m==="price"?"bg-indigo-100 text-indigo-700 border-indigo-300":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Prix ",m==="price"&&(w==="asc"?"↑":"↓")]}),t.jsxs("button",{onClick:()=>V("createdAt"),className:`px-3 py-2 text-sm rounded-md border ${m==="createdAt"?"bg-indigo-100 text-indigo-700 border-indigo-300":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Date ",m==="createdAt"&&(w==="asc"?"↑":"↓")]})]})]})}),t.jsx("div",{className:"space-y-4",children:W.length===0?t.jsxs("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-8 text-center`,children:[t.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:`text-lg ${r?"text-gray-400":"text-gray-500"}`,children:y?"Aucun produit trouvé":"Aucun produit enregistré"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:y?"Essayez une recherche différente":"Commencez par créer votre premier produit"})]}):ge.map(s=>{const i=re.has(s.id);return t.jsx("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow`,children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:`flex justify-between items-start cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors px-4 py-3 -mx-4 -my-3 rounded-lg ${i?"bg-gray-50 dark:bg-gray-700/30":""}`,onClick:a=>{a.target.closest("button")||xe(s.id)},children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[i?t.jsx(S,{className:"h-4 w-4 text-indigo-600"}):t.jsx(_,{className:"h-4 w-4 text-indigo-600"}),t.jsx($,{className:"h-4 w-4 text-gray-400"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:s.name}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:s.category||"Sans catégorie"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:["€",s.price]}),t.jsxs("span",{children:["Stock: ",s.stock]}),t.jsx("span",{className:`text-xs ${s.stock<=5?"text-red-600 font-medium":s.stock<=10?"text-yellow-600":"text-gray-500"}`,children:s.stock<=5?"⚠️ Stock faible!":s.stock<=10?"⚠️ Stock limité":""})]})]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>{e.stopPropagation(),D(s.id),h("main"),c({name:s.name,category:s.category,price:s.price,stock:s.stock,sku:s.sku,description:s.description,imageUrl:s.imageUrl,createdAt:s.createdAt||""})},className:"p-2 text-gray-400 hover:text-gray-500",title:"Modifier ce produit (ouvre l'onglet Créer un produit)",children:t.jsx(Q,{className:"h-5 w-5"})}),t.jsx("button",{onClick:a=>{a.stopPropagation(),window.confirm("Êtes-vous sûr de vouloir supprimer ce produit ?")&&se(s.id)},className:"p-2 text-gray-400 hover:text-red-500",title:"Supprimer",children:t.jsx(ee,{className:"h-5 w-5"})})]})]}),i&&t.jsx("div",{className:`mt-4 pt-4 border-t ${r?"border-gray-700":"border-gray-200"}`,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4",children:t.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"})}),t.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:s.description})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"SKU"}),t.jsx("p",{className:`text-sm font-mono ${r?"text-gray-400":"text-gray-600"}`,children:s.sku})]}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Prix de vente"}),t.jsxs("p",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:["€",s.price]})]}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Stock disponible"}),t.jsxs("p",{className:`text-sm ${s.stock<=5?"text-red-600 font-medium":s.stock<=10?"text-yellow-600":r?"text-gray-400":"text-gray-600"}`,children:[s.stock," unités"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Catégorie"}),t.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:s.category||"Aucune catégorie"})]})]})]})})]})},s.id)})})]}),f==="categories"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S,{className:"h-5 w-5 text-indigo-600"}),t.jsx("h2",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:"Gestion des catégories"})]}),t.jsxs("button",{onClick:()=>q(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4"}),"Nouvelle catégorie"]})]}),oe&&t.jsxs("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-4 mb-6`,children:[t.jsx("h3",{className:`text-md font-medium mb-4 ${r?"text-white":"text-gray-900"}`,children:"Ajouter une nouvelle catégorie"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:T,onChange:s=>K(s.target.value),placeholder:"Nom de la catégorie",className:`flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white"}`,autoFocus:!0}),t.jsx("button",{type:"button",onClick:ue,disabled:!T.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Ajouter"}),t.jsx("button",{type:"button",onClick:ye,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:t.jsx(G,{className:"h-4 w-4"})})]})]}),x&&t.jsxs("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-6 mb-6`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:['Modifier la catégorie "',x,'"']}),t.jsx("button",{onClick:I,className:"p-2 text-gray-400 hover:text-gray-600",children:t.jsx(G,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Nouveau nom de la catégorie"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:k,onChange:s=>z(s.target.value),className:`flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white"}`,placeholder:"Nouveau nom"}),t.jsx("button",{onClick:je,disabled:!k.trim()||k.trim()===x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Renommer"})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("h4",{className:`text-md font-medium mb-3 ${r?"text-gray-300":"text-gray-700"}`,children:["Produits dans cette catégorie (",g.filter(s=>s.category===x).length,")"]}),t.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[g.filter(s=>s.category===x).map(s=>t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"} border ${r?"border-gray-600":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 rounded object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:s.name}),t.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["Stock: ",s.stock," • €",s.price]})]})]}),t.jsx("button",{onClick:()=>Ne(s.id),className:"p-1 text-red-400 hover:text-red-600",title:"Retirer de la catégorie",children:t.jsx(G,{className:"h-4 w-4"})})]},s.id)),g.filter(s=>s.category===x).length===0&&t.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"} text-center py-4`,children:"Aucun produit dans cette catégorie"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:`text-md font-medium mb-3 ${r?"text-gray-300":"text-gray-700"}`,children:"Ajouter des produits à cette catégorie"}),t.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[g.filter(s=>!s.category||s.category==="").map(s=>t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"} border ${r?"border-gray-600":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 rounded object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:s.name}),t.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["Stock: ",s.stock," • €",s.price]})]})]}),t.jsx("button",{onClick:()=>fe(s.id,x),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",title:"Ajouter à la catégorie",children:"Ajouter"})]},s.id)),g.filter(s=>!s.category||s.category==="").length===0&&t.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"} text-center py-4`,children:"Aucun produit sans catégorie"})]})]})]}),t.jsx("div",{className:"space-y-4",children:u.length===0?t.jsxs("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow p-8 text-center`,children:[t.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:`text-lg ${r?"text-gray-400":"text-gray-500"}`,children:"Aucune catégorie trouvée"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Commencez par créer votre première catégorie"})]}):u.filter(s=>s&&s.trim()).map((s,i)=>{const a=g.filter(o=>o.category===s).length,n=g.filter(o=>o.category===s).reduce((o,v)=>o+v.price*v.stock,0),F=g.filter(o=>o.category===s),N=ne.has(s);return t.jsx("div",{className:`rounded-lg ${r?"bg-gray-800":"bg-white"} shadow`,children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:`flex justify-between items-start cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors px-4 py-3 -mx-4 -my-3 rounded-lg ${N?"bg-gray-50 dark:bg-gray-700/30":""}`,onClick:o=>{o.target.closest("button")||he(s)},children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[N?t.jsx(S,{className:"h-4 w-4 text-indigo-600"}):t.jsx(_,{className:"h-4 w-4 text-indigo-600"}),t.jsx($,{className:"h-4 w-4 text-gray-400"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:s}),t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${r?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[a," produit",a!==1?"s":""]})]}),t.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:t.jsxs("span",{children:["Valeur totale: €",n.toFixed(2)]})})]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:o=>{o.stopPropagation(),pe(s)},className:"p-2 text-gray-400 hover:text-gray-500",title:"Modifier la catégorie",children:t.jsx(Q,{className:"h-5 w-5"})}),t.jsx("button",{onClick:o=>{if(o.stopPropagation(),a>0){alert(`Impossible de supprimer cette catégorie car elle contient ${a} produit${a!==1?"s":""}.`);return}window.confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${s}" ?`)&&(C.setState(v=>({categories:v.categories.filter(ve=>ve!==s)})),console.log(`Deleting category "${s}" from Firestore`))},className:`p-2 ${a>0?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-500"}`,title:a>0?"Impossible de supprimer (catégorie utilisée)":"Supprimer",disabled:a>0,children:t.jsx(ee,{className:"h-5 w-5"})})]})]}),N&&t.jsx("div",{className:`mt-4 pt-4 border-t ${r?"border-gray-700":"border-gray-200"}`,children:F.length===0?t.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"} text-center py-4`,children:"Aucun produit dans cette catégorie"}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:`text-sm font-medium mb-3 ${r?"text-gray-300":"text-gray-700"}`,children:"Produits dans cette catégorie:"}),F.map(o=>t.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r?"bg-gray-700":"bg-gray-50"} border ${r?"border-gray-600":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-8 h-8 rounded object-cover"}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:o.name}),t.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["SKU: ",o.sku," • Stock: ",o.stock," • €",o.price]})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:v=>{v.stopPropagation(),alert(`Pour modifier ce produit, allez dans l'onglet "Créer un produit"`)},className:"p-1 text-gray-400 hover:text-gray-500 opacity-50 cursor-not-allowed",title:"Modification désactivée dans cet onglet",children:t.jsx(Q,{className:"h-4 w-4"})})})]},o.id))]})})]})},s)})})]})]})}export{Re as default};
