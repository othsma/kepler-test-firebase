import{j as e}from"./vendor-pdf-renderer-Bmei4UPz.js";import{r as j}from"./vendor-react-DSd34EeT.js";import{u as f,a as E,b as D,c as R,d as T,R as d}from"./index-Bitl2p2P.js";import{x as P,y as k,W as u,U as C,z as y,E as p,G as A,S as U}from"./vendor-ui-Cgar-0cM.js";import{f as b}from"./vendor-utils-Bnff-AKO.js";import{R as I,B as q,C as _,X as B,Y as F,T as W,a as N}from"./vendor-charts-IFI8gCU-.js";import"./vendor-firebase-BtFjE0-F.js";import"./vendor-pdf-utils-CBrSDip1.js";function G({date:t=new Date}){const a=f(n=>n.isDarkMode),c=Math.floor(Math.random()*2e3)+500,m=Math.floor(Math.random()*2e3)+500,o=(c-m)/m*100,r=o>=0,i=Math.floor(Math.random()*20)+5,x=c/i,h=[{method:"Espèces",amount:Math.floor(Math.random()*1e3)+100},{method:"Carte bancaire",amount:Math.floor(Math.random()*1e3)+100},{method:"Virement",amount:Math.floor(Math.random()*500)+50},{method:"Chèque",amount:Math.floor(Math.random()*500)+50}],g=[{name:"iPhone 14",quantity:3,amount:2997},{name:"Samsung Galaxy Tab S8",quantity:2,amount:1598},{name:"Screen Protector",quantity:5,amount:99.95},{name:"USB-C Cable",quantity:8,amount:159.92}];return e.jsxs("div",{className:`rounded-lg ${a?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:"Résumé des ventes quotidiennes"}),e.jsx("div",{className:`text-sm ${a?"text-gray-400":"text-gray-500"}`,children:b(t,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium ${a?"text-gray-400":"text-gray-500"}`,children:"Ventes totales"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:["€",c.toLocaleString()]}),e.jsxs("div",{className:`ml-2 flex items-center ${r?"text-green-500":"text-red-500"}`,children:[r?e.jsx(P,{className:"h-4 w-4 mr-1"}):e.jsx(k,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:[Math.abs(o).toFixed(1),"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium ${a?"text-gray-400":"text-gray-500"}`,children:"Transactions"}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${a?"text-white":"text-gray-900"}`,children:i})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium ${a?"text-gray-400":"text-gray-500"}`,children:"Panier moyen"}),e.jsxs("p",{className:`text-2xl font-bold mt-2 ${a?"text-white":"text-gray-900"}`,children:["€",x.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium mb-3 ${a?"text-gray-400":"text-gray-500"}`,children:"Modes de paiement"}),e.jsx("div",{className:"space-y-3",children:h.map(n=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-700",children:n.method}),e.jsxs("span",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:["€",n.amount.toLocaleString()]})]},n.method))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium mb-3 ${a?"text-gray-400":"text-gray-500"}`,children:"Produits populaires"}),e.jsx("div",{className:"space-y-3",children:g.map(n=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:a?"text-gray-300":"text-gray-700",children:n.name}),e.jsxs("span",{className:`ml-2 text-xs ${a?"text-gray-400":"text-gray-500"}`,children:["x",n.quantity]})]}),e.jsxs("span",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:["€",n.amount.toLocaleString()]})]},n.name))})]})]})]})}function Q(){const t=f(s=>s.isDarkMode),{tickets:a}=E(),{clients:c}=D(),{products:m}=R(),{user:o,userRole:r}=T(),i=j.useMemo(()=>r===d.SUPER_ADMIN?a:o?a.filter(s=>s.technicianId===o.uid):[],[a,r,o]),x=i.filter(s=>s.status==="pending").length,h=i.filter(s=>s.status==="in-progress").length,g=i.filter(s=>s.status==="completed").length,n=i.reduce((s,l)=>s+l.cost,0),v=r===d.SUPER_ADMIN?m.filter(s=>s.stock<5).length:0,w=()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(l=>r===d.SUPER_ADMIN?{name:l,sales:Math.floor(Math.random()*3e3)+1e3,repairs:Math.floor(Math.random()*2e3)+500}:{name:l,repairs:Math.floor(Math.random()*2e3)+500}),M=j.useMemo(()=>w(),[r]),$=(()=>{const s=[{name:"Réparations en attente",value:x.toString(),icon:y,color:"bg-yellow-500"},{name:"En cours",value:h.toString(),icon:u,color:"bg-blue-500"},{name:"Réparations terminées",value:g.toString(),icon:p,color:"bg-green-500"},{name:"Gains totaux",value:`€${n.toFixed(2)}`,icon:A,color:"bg-indigo-500"}];return r===d.SUPER_ADMIN?[...s,{name:"Articles en stock faible",value:v.toString(),icon:U,color:"bg-red-500"}]:s})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:$.map(s=>e.jsx("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow p-6`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${s.color} p-3 rounded-full`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:s.name}),e.jsx("p",{className:`text-2xl font-semibold ${t?"text-white":"text-gray-900"}`,children:s.value})]})]})},s.name))}),r===d.SUPER_ADMIN&&e.jsx(G,{}),e.jsxs("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Performance hebdomadaire"}),e.jsx("div",{className:"h-80",children:e.jsx(I,{width:"100%",height:"100%",children:e.jsxs(q,{data:M,children:[e.jsx(_,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"name"}),e.jsx(F,{}),e.jsx(W,{}),r===d.SUPER_ADMIN&&e.jsx(N,{dataKey:"sales",fill:"#4F46E5",name:"Ventes (€)"}),e.jsx(N,{dataKey:"repairs",fill:"#10B981",name:"Réparations (€)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Tickets de réparation récents"}),e.jsxs("div",{className:"space-y-4",children:[i.slice(0,5).map(s=>{const l=c.find(S=>S.id===s.clientId);return e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-2 rounded-full mr-4 ${s.status==="pending"?"bg-yellow-100 text-yellow-600":s.status==="in-progress"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:[l==null?void 0:l.name," - ",s.deviceType," ",s.brand]}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["Statut: ",s.status," | €",s.cost]})]})]},s.id)}),i.length===0&&e.jsx("p",{className:`text-center py-4 ${t?"text-gray-400":"text-gray-500"}`,children:"Aucun ticket ne vous a encore été assigné."})]})]}),r===d.SUPER_ADMIN?e.jsxs("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Clients récents"}),e.jsxs("div",{className:"space-y-4",children:[c.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-full mr-4",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[s.phone," | ",b(new Date(s.createdAt),"MMM d, yyyy")]})]})]},s.id)),c.length===0&&e.jsx("p",{className:`text-center py-4 ${t?"text-gray-400":"text-gray-500"}`,children:"Aucun client dans le système pour le moment."})]})]}):e.jsxs("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow p-6`,children:[e.jsx("h2",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Répartition des statuts des tickets"}),e.jsxs("div",{className:"flex justify-around items-center h-64",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-2",children:e.jsx(y,{className:"h-8 w-8 text-yellow-600"})}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:x}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"En attente"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-2",children:e.jsx(u,{className:"h-8 w-8 text-blue-600"})}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:h}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"En cours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-2",children:e.jsx(p,{className:"h-8 w-8 text-green-600"})}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:g}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Terminé"})]})]})]})]})]})}export{Q as default};
